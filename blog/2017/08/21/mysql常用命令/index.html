<!-- -> 定义页面布局--><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="keywords" content="Mrzjd Mrzebra hexo IT font-end 前端 技术"><meta name="keywords" content="Programming,DB"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.8.0/github-markdown.min.css"><link rel="stylesheet" href="/blog/less/main.css"><link rel="icon" href="/blog/images/favicon.png"><title>Mysql常用命令</title><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script src="/blog/js/article.js"></script></head><body><header class="header"><h1 class="logo"><a href="/blog/" style="background-image:url(/blog//images/zblog-logo.png);">zblog</a></h1><i class="icon-list fa fa-bars"></i></header><div class="list-container"><ul class="header-list"><li class="header-item"><a href="/blog" title="HOME">HOME</a></li><li class="header-item"><a href="/blog/archives" title="Archives">Archives</a></li><li class="header-item"><a href="https://github.com/mrzjd" title="Github">Github</a></li></ul><div class="list-close"><i class="icon-close fa fa-times-circle-o"></i></div></div><div class="content"><article><div class="title-box"><h1 class="title"><span class="arti-tag" style="background:#096148;">DB</span>Mysql常用命令</h1><div class="date"><i class="icon-calendar fa fa-calendar"></i><span class="time">2017.08.21</span></div></div><div class="article-text markdown-body"><h4 id="mysql-win64-v5-7-19"><a href="#mysql-win64-v5-7-19" class="headerlink" title="mysql win64 v5.7.19"></a>mysql win64 v5.7.19</h4><h4 id="nodejs连接mysql库-mysql"><a href="#nodejs连接mysql库-mysql" class="headerlink" title="nodejs连接mysql库 -  mysql"></a>nodejs连接mysql库 -  <a href="https://github.com/mysqljs/mysql" target="_blank" rel="noopener">mysql</a></h4><h3 id="Mysql-Shell-CRUD"><a href="#Mysql-Shell-CRUD" class="headerlink" title="Mysql-Shell CRUD"></a>Mysql-Shell CRUD</h3><h4 id="登陆"><a href="#登陆" class="headerlink" title="登陆"></a>登陆</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p // -&gt; mysql登陆</span><br><span class="line">mysql -h 127.0.0.1 -u root -p // -&gt; mysql远程登录</span><br><span class="line"></span><br><span class="line">grant select,insert,update,delete on *.* to usernameDemo@localhost identified by &quot;passwordDemo&quot; // -&gt; 添加用户 localhost-&gt;%远程登陆</span><br></pre></td></tr></table></figure>
<h4 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">show databases;	 // -&gt; 显示所有数据库</span><br><span class="line"></span><br><span class="line">create database demo; // -&gt; 建库</span><br><span class="line">drop database demo; // -&gt; 删库</span><br><span class="line"></span><br><span class="line">use demo; // -&gt; 切换库</span><br><span class="line"></span><br><span class="line">create table TableName(FieldList); // -&gt; 建表</span><br><span class="line">create table &lt;表名&gt; ( &lt;字段名1&gt; &lt;类型1&gt; [,..&lt;字段名n&gt; &lt;类型n&gt;]);</span><br><span class="line"></span><br><span class="line">describe TableName; // -&gt; 查看表结构</span><br><span class="line">rename table 原表名 to 新表名; </span><br><span class="line"></span><br><span class="line">delete from TableName; // -&gt; 清除表中记录</span><br><span class="line">drop table TableName; // -&gt; 删表</span><br><span class="line"></span><br><span class="line">/********** Retrieve ***********/</span><br><span class="line">select * from TableName; // -&gt; 查看表所有的记录</span><br><span class="line">select &lt;字段1，字段2，...&gt; from &lt; 表名 &gt; where &lt; 表达式 &gt;;</span><br><span class="line"></span><br><span class="line">/********** CREATE ***********/</span><br><span class="line">insert into &lt;表名&gt; [( &lt;字段名1&gt;[,..&lt;字段名n &gt; ])] values ( 值1 )[, ( 值n )];</span><br><span class="line"></span><br><span class="line">/********** DELETE ***********/</span><br><span class="line">delete from 表名 where 表达式;</span><br><span class="line"></span><br><span class="line">/********** UPDATE ***********/</span><br><span class="line">UPDATE userinfo SET UserName = ?,UserPass = ? WHERE Id = ? // -&gt; 更新数据</span><br></pre></td></tr></table></figure>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select COUNT(1) FROM userinfo; // -&gt; 查看表中数据的条数</span><br></pre></td></tr></table></figure>
<h3 id="nodejs连接mysql库"><a href="#nodejs连接mysql库" class="headerlink" title="nodejs连接mysql库"></a>nodejs连接mysql库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Temp : mysql CRUD demo</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var mysql = require(&apos;mysql&apos;);</span><br><span class="line"></span><br><span class="line">// db连接配置</span><br><span class="line">var connection = mysql.createConnection(&#123;</span><br><span class="line">    host: &apos;127.0.0.1&apos;,</span><br><span class="line">    user: &apos;mrzjd&apos;,</span><br><span class="line">    password: &apos;qqzhang1995128&apos;,</span><br><span class="line">    port: &apos;3306&apos;,</span><br><span class="line">    database: &apos;nodesample&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// db连接</span><br><span class="line">connection.connect((err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;[query] - &apos; + err);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    console.log(&apos;[connection connet] success!&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// db - insert query</span><br><span class="line">function dbAddUser(conn, name, paswd) &#123;</span><br><span class="line">    var userAdd1 = &apos;INSERT INTO userinfo(id,Username, UserPass) VALUE(0,?,?)&apos;;</span><br><span class="line">    var userAdd1Param = [name, paswd];</span><br><span class="line">    conn.query(userAdd1, userAdd1Param, (err, rows, fields) =&gt; &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&apos;[query] - &apos; + err);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        console.log(&apos;--------------INSERT---------------&apos;);</span><br><span class="line">        console.log(&apos;INSERT ID: &apos;, rows);</span><br><span class="line">        console.log(&apos;-----------------------------------&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// db - search query</span><br><span class="line">function dbSelectUser(conn, name) &#123;</span><br><span class="line">    var userSelec = &apos;SELECT * FROM userinfo&apos;;</span><br><span class="line">    conn.query(userSelec, (err, rows) =&gt; &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&apos;[query] - &apos; + err);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        console.log(&apos;--------------SELECT----------------&apos;);</span><br><span class="line">        console.log(&apos;Select Data: &apos;, rows);</span><br><span class="line">        console.log(&apos;------------------------------------&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// db - delete query</span><br><span class="line">function dbDeleteUser(conn, username) &#123;</span><br><span class="line">    var userDeleQuery = &apos;DELETE FROM userinfo WHERE Username = ?&apos;;</span><br><span class="line"></span><br><span class="line">    conn.query(userDeleQuery, [username], (err, rows) =&gt; &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&apos;[query] - &apos; + err);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        console.log(&apos;------------DELETE---------------&apos;);</span><br><span class="line">        console.log(&apos;Delete Data: &apos;, rows);</span><br><span class="line">        console.log(&apos;---------------------------------&apos;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// db - update query</span><br><span class="line">function dbUpdateUser(conn, username, newpaswd)&#123;</span><br><span class="line">    var userUpdateQuery = &apos;UPDATE userinfo SET UserPass = ? WHERE Username = ?&apos;;</span><br><span class="line"></span><br><span class="line">    conn.query(userUpdateQuery, [newpaswd, username], (err, rows) =&gt; &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(&apos;[query] - &apos; + err);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        console.log(&apos;------------UPDATE---------------&apos;);</span><br><span class="line">        console.log(&apos;Update Data: &apos;, rows);</span><br><span class="line">        console.log(&apos;---------------------------------&apos;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// dbAddUser(connection, &apos;mrzjd&apos;, &apos;qq123&apos;);</span><br><span class="line">// dbAddUser(connection, &apos;mrchou&apos;, &apos;qq456&apos;); </span><br><span class="line">// dbDeleteUser(connection, &apos;Willson&apos;);</span><br><span class="line">// dbUpdateUser(connection, &apos;mrchou&apos;, &apos;qq678&apos;);</span><br><span class="line">dbSelectUser(connection);</span><br><span class="line"></span><br><span class="line">// db断开连接</span><br><span class="line">connection.end((err) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    console.log(&apos;[connection end] success!&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="More"><a href="#More" class="headerlink" title="More"></a>More</h3><ul>
<li><a href="http://docs.sequelizejs.com/" target="_blank" rel="noopener">sequelizejs</a> - nodejs &amp; mysql ORM</li>
<li>多表查询等进阶内容单独开文章，实战时深入学习</li>
</ul>
</div></article></div><footer class="footer"><p class="info">Welcome to mrzjd's blog!</p><div class="infobox"><ul class="contacts"><li class="contacts-i">QQ: 390303304</li><li class="contacts-i">Mail: 390303304@qq.com</li></ul><p>Powered by hexo and github. The theme is zebra-theme.</p></div></footer></body></html>