<!-- -> 定义页面布局--><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="keywords" content="Mrzjd Mrzebra hexo IT font-end 前端 技术"><meta name="keywords" content="Nodejs,App开发"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.8.0/github-markdown.min.css"><link rel="stylesheet" href="/blog/less/main.css"><link rel="icon" href="/blog/images/favicon.png"><title>Tabris.js制作原生即时通讯App</title><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script src="/blog/js/article.js"></script></head><body><header class="header"><h1 class="logo"><a href="/blog/" style="background-image:url(/blog//images/zblog-logo.png);">zblog</a></h1><i class="icon-list fa fa-bars"></i></header><div class="list-container"><ul class="header-list"><li class="header-item"><a href="/blog" title="HOME">HOME</a></li><li class="header-item"><a href="/blog/archives" title="Archives">Archives</a></li><li class="header-item"><a href="https://github.com/mrzjd" title="Github">Github</a></li></ul><div class="list-close"><i class="icon-close fa fa-times-circle-o"></i></div></div><div class="content"><article><div class="title-box"><h1 class="title"><span class="arti-tag" style="background:#2c3742;">Tabris.js</span>Tabris.js制作原生即时通讯App</h1><div class="date"><i class="icon-calendar fa fa-calendar"></i><span class="time">2017.11.30</span></div></div><div class="article-text markdown-body"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>最近闲来无事看了看js开发移动应用方面的知识，刚好有朋友的毕业设计是制作一款即时通讯APP，就顺便实战撸了一个。开发过程不到一周，开发体验对于我这样的小白来说算是很友好了。</p>
<ul>
<li>UI: Tabris.js</li>
<li>Server: Nodejs(koa)</li>
<li>通讯: WebSocket</li>
</ul>
<h2 id="Weex-RN-vs-Cordova-hybrid-vs-Tabris-js"><a href="#Weex-RN-vs-Cordova-hybrid-vs-Tabris-js" class="headerlink" title="Weex/RN vs Cordova(hybrid) vs Tabris.js"></a>Weex/RN vs Cordova(hybrid) vs Tabris.js</h2><p>简单说一下自己对这方面的见解:</p>
<p><strong> Weex/RN 跨平台移动应用开发框架 </strong></p>
<blockquote>
<p>这一套前端理念非常的好，通过一个中间层可以将UI转换成不同的平台组件。<br>工具链非常完善，完全可以把用在web上的技术移植过来。<br>平台封装好了部分原生组件，编译打包，性能方面很优秀，UI定制化效果实现复杂一点的效果应该也没有任何问题。</p>
</blockquote>
<p><strong> Cordova 混合应用开发 </strong></p>
<blockquote>
<p>Cordova核心是Webview内的JS-binding，以及Webview壳的打包。所以Cordova提供了非常多的插件供web开发者使用。<br>由于是通过webview操作dom ui，所以性能上不太理想。但是可以无缝移植WebApp，添加功能化插件的代码即可。</p>
</blockquote>
<p><strong> Tabris.js </strong></p>
<blockquote>
<p>Tabris的核心使用js命令式生成原生UI界面。通过cordova plugins提供js执行系统api的能力。<br>准确来说Tabris并不是一款跨平台的应用开发框架，而是为js开发者提供了制作原生app的途径。<br>对于中小应用来说应用性能算是很好，UI界面效果偏简单。由于内部依然是执行js所以执行性能可能还是略有欠缺。</p>
</blockquote>
<p>开发体验上几款框架都有尝试，最后选择Tabris。Tabris开发体验极其好，提供了测试app，利用cordova打包编译或者直接在官网上打包生成安装包。命令式UI让js开发不用再去书写html/css，all-in-js的开发体验非常棒。</p>
<p>不选择Weex/RN的原因是其繁琐的工具链打包过程，折腾了几天都搞不定，最后只能放弃了。如果能在Tabris上响应数据流的变化，那应该就是完美了。如果有机会，可以自己撸一个。</p>
<h2 id="UI图"><a href="#UI图" class="headerlink" title="UI图"></a>UI图</h2><p class="imgbox"><br><img src="http://ouzcfzhgs.bkt.clouddn.com/blog/20171130/114904353.png" alt="welcome"><br><img src="http://ouzcfzhgs.bkt.clouddn.com/blog/20171130/114907150.png" alt="login"><br></p>

<p class="imgbox"><br><img src="http://ouzcfzhgs.bkt.clouddn.com/blog/20171130/114912697.png" alt="chatlist"><br><img src="http://ouzcfzhgs.bkt.clouddn.com/blog/20171130/114910291.png" alt="chat"><br><img src="http://ouzcfzhgs.bkt.clouddn.com/blog/20171130/114915510.png" alt="search"><br></p>

<h2 id="Tabris-js-All-In-JS"><a href="#Tabris-js-All-In-JS" class="headerlink" title="Tabris.js All-In-JS"></a>Tabris.js All-In-JS</h2><p>记录一下UI开发上遇到的问题:</p>
<ul>
<li>1.NavigationView不好用</li>
</ul>
<blockquote>
<p>使用NavigationView内部会有一个toolbar就是顶部的导航标题栏 -&gt; 变动性太小<br>NavigationView从父页面进入子页面，父页面的ui不会丢弃，子页面回到父页面，子页面的ui.disposed。<br>NavigationView回到子页面时页面UI不会重新渲染，数据流的变化有些复杂(这一块可能是我自己的应用编写经验不足，有了解的小伙伴可以一起交流一下)<br>app.backNavigation事件在页面dispose之前触发<br>NavigationView的后退按钮，没有相关事件的触发</p>
</blockquote>
<ul>
<li>2.highlightOnTouch</li>
</ul>
<blockquote>
<p>用在父组件上时UI发生闪动，而且子控件位置效果会发生变化</p>
</blockquote>
<ul>
<li>3.fs操作fs.cacheDir</li>
</ul>
<blockquote>
<p>文件在app推出后会发生丢失？或许这只是tabris开发者APP的一个问题？</p>
</blockquote>
<ul>
<li>4.animation动画只能改变位置</li>
</ul>
<blockquote>
<p>动画只能修改控件的x/y位置以及scale/rotate等效果，空间大小无法修改</p>
</blockquote>
<ul>
<li>5.cordova plugins</li>
</ul>
<blockquote>
<p>直接在confing.xml中写入配置，无需安装，打包时会自动安装。<br>tabris.js app调试时如果需要引入插件，则需要重新打包该调试app</p>
</blockquote>
<h2 id="Nodejs-Server"><a href="#Nodejs-Server" class="headerlink" title="Nodejs Server"></a>Nodejs Server</h2><ul>
<li>api server - 通过koa编写接口服务</li>
<li>websocket server - 管理websocket链接(这一块参考前面的websocket协议文章)</li>
<li>sequelize - mysql-ORM对象关系映射</li>
</ul>
<blockquote>
<p>koa很棒，简单明了，直接写中间件函数就可以<br>没有使用socket.io的原因是tabris.js内置了websocket, 而socket.io需要客户端和服务端都使用socket.io才能协同工作. 这一块tabris.js如何嵌入socket.io可以研究一下.<br>mysql进行数据管理</p>
</blockquote>
<p><strong> sql </strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> chatapp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span> (</span><br><span class="line">    userid <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    username <span class="built_in">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    pswd <span class="built_in">char</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> userinfo &#123;</span><br><span class="line">    userid <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">    username <span class="built_in">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    nikename <span class="built_in">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    avatar <span class="built_in">char</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> token &#123;</span><br><span class="line">    token <span class="built_in">char</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">    userid <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>pswd md5 hex加密后存入<br>token md5 base64为键值<br>通过文件管理用户的联系人 -&gt; 因为这一块不清楚sql的实现…….逃…</p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>多写多练多接触。-&gt; 没什么创新性，懒得传github了……..逃…</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://youjingyu.github.io/Tabris-Documention/" target="_blank" rel="noopener">Tabrisjs - 中文文档</a></li>
<li><a href="https://tabrisjs.com" target="_blank" rel="noopener">Tabrisjs - 官网</a></li>
<li><a href="/blog/2017/11/16/Nodejs总结之WebSocket应用实战/">websocket - 实战</a></li>
<li><a href="https://socket.io/docs/" target="_blank" rel="noopener">socket.io doc</a></li>
<li><a href="https://itbilu.com/nodejs/npm/VkYIaRPz-.html" target="_blank" rel="noopener">Sequelize 中文文档</a></li>
<li><a href="http://koacn.com/" target="_blank" rel="noopener">koa - 中文网</a></li>
<li><a href="http://koajs.com/" target="_blank" rel="noopener">koa - 官网</a></li>
<li><a href="http://cordova.axuer.com/plugins/" target="_blank" rel="noopener">cordova中文网 - 插件</a></li>
</ul>
</div></article></div><footer class="footer"><p class="info">Welcome to mrzjd's blog!</p><div class="infobox"><ul class="contacts"><li class="contacts-i">QQ: 390303304</li><li class="contacts-i">Mail: 390303304@qq.com</li></ul><p>Powered by hexo and github. The theme is zebra-theme.</p></div></footer></body></html>