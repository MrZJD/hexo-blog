<!-- -> 定义页面布局--><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="keywords" content="Mrzjd Mrzebra hexo IT font-end 前端 技术"><meta name="keywords" content="Phaser"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.8.0/github-markdown.min.css"><link rel="stylesheet" href="/blog/less/main.css"><link rel="icon" href="/blog/images/favicon.png"><title>Phaser(1)-TS/JS开发环境搭建及基础知识介绍</title><script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script src="/blog/js/article.js"></script></head><body><header class="header"><h1 class="logo"><a href="/blog/" style="background-image:url(/blog//images/zblog-logo.png);">zblog</a></h1><i class="icon-list fa fa-bars"></i></header><div class="list-container"><ul class="header-list"><li class="header-item"><a href="/blog" title="HOME">HOME</a></li><li class="header-item"><a href="/blog/archives" title="Archives">Archives</a></li><li class="header-item"><a href="https://github.com/mrzjd" title="Github">Github</a></li></ul><div class="list-close"><i class="icon-close fa fa-times-circle-o"></i></div></div><div class="content"><article><div class="title-box"><h1 class="title"><span class="arti-tag" style="background:#491665;">Phaser</span>Phaser(1)-TS/JS开发环境搭建及基础知识介绍</h1><div class="date"><i class="icon-calendar fa fa-calendar"></i><span class="time">2018.01.22</span></div></div><div class="article-text markdown-body"><h2 id="本文内容"><a href="#本文内容" class="headerlink" title="本文内容"></a>本文内容</h2><ul>
<li>开发环境搭建</li>
<li>HelloWorld</li>
<li>Phaser各功能简介</li>
</ul>
<h2 id="开发环境搭建"><a href="#开发环境搭建" class="headerlink" title="开发环境搭建"></a>开发环境搭建</h2><h3 id="based-without-js-tools-不依赖工具链-的开发环境"><a href="#based-without-js-tools-不依赖工具链-的开发环境" class="headerlink" title="based without js tools(不依赖工具链)的开发环境"></a>based without js tools(不依赖工具链)的开发环境</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入phaser版本包即可 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/phaser/2.6.2/phaser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">// 这里编写游戏代码</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Using-webpack-ES6-TypeScript"><a href="#Using-webpack-ES6-TypeScript" class="headerlink" title="Using webpack + ES6/TypeScript"></a>Using webpack + ES6/TypeScript</h3><h4 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1. 安装依赖"></a>1. 安装依赖</h4><p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">        <span class="attr">"addtype"</span>: <span class="string">"cp ./node_modules/phaser/typescript/* ./typings"</span>,</span><br><span class="line">        <span class="attr">"build"</span>: <span class="string">"webpack"</span>,</span><br><span class="line">        <span class="attr">"dev"</span>: <span class="string">"webpack-dev-server --inline"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">        <span class="attr">"phaser"</span>: <span class="string">"^2.6.2"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">        <span class="attr">"babel-core"</span>: <span class="string">"^6.26.0"</span>,</span><br><span class="line">        <span class="attr">"babel-loader"</span>: <span class="string">"^7.1.2"</span>,</span><br><span class="line">        <span class="attr">"babel-preset-env"</span>: <span class="string">"^1.6.1"</span>,</span><br><span class="line">        <span class="attr">"html-webpack-plugin"</span>: <span class="string">"^2.30.1"</span>,</span><br><span class="line">        <span class="attr">"webpack"</span>: <span class="string">"^3.10.0"</span>,</span><br><span class="line">        <span class="attr">"webpack-dev-server"</span>: <span class="string">"^2.10.1"</span>,</span><br><span class="line">        "ts-loader": "^3.2.0", // for ts</span><br><span class="line">        "typescript": "^2.6.2" // for ts</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-webpack-config-js-babelrc"><a href="#2-webpack-config-js-babelrc" class="headerlink" title="2. webpack.config.js / .babelrc"></a>2. webpack.config.js / .babelrc</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry : &#123;</span><br><span class="line">        main : <span class="string">'./src/index.ts'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    output : &#123;</span><br><span class="line">        path : path.resolve(__dirname, <span class="string">'./build'</span>),</span><br><span class="line">        filename : <span class="string">'js/[name].js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">'.ts'</span>, <span class="string">'.js'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span> : &#123;</span><br><span class="line">        loaders : [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">                loader: <span class="string">'babel-loader'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">                loader: <span class="string">'ts-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: <span class="string">'Hello Phaser'</span>,</span><br><span class="line">            template: <span class="string">'./index.html'</span>,</span><br><span class="line">            filename: <span class="string">'index.html'</span>,</span><br><span class="line">            chunks: [<span class="string">'main'</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-添加代码提示"><a href="#3-添加代码提示" class="headerlink" title="3. 添加代码提示"></a>3. 添加代码提示</h4><blockquote>
<p>仅针对v2.x版本, 即将发布v3版本已全面支持es6和npm包</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> mkdir typings</span><br><span class="line"><span class="meta">#</span> touch jsconfig.json</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> npm run addtype</span><br><span class="line"><span class="meta">#</span> cp ./node_modules/phaser/typescript/* ./typings</span><br></pre></td></tr></table></figure>
<h2 id="Hello-Phaser"><a href="#Hello-Phaser" class="headerlink" title="Hello Phaser"></a>Hello Phaser</h2><blockquote>
<p>后续内容均采用es6/ts语法进行编写，vanilla js同理。</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;&gt; index.ts &lt;&lt;&lt;&lt;</span><br><span class="line"><span class="keyword">import</span> WelcomeScene <span class="keyword">from</span> <span class="string">'./scene/welcome.scene'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @class HelloGame</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> HelloGame &#123;</span><br><span class="line">    game: Phaser.Game;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span> (<span class="params">w, h</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.game = <span class="keyword">new</span> Phaser.Game(w, h, Phaser.AUTO, <span class="string">'game'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.game.state.add(<span class="string">'welcome'</span>, <span class="keyword">new</span> WelcomeScene());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>.game.state.start(<span class="string">'welcome'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> HelloGame(<span class="number">500</span>, <span class="number">600</span>);</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;&gt; welcome.scene.ts &lt;&lt;&lt;&lt;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @class WelcomeScene</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> WelcomeScene <span class="keyword">extends</span> Phaser.State &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    preload () &#123;</span><br><span class="line">        <span class="keyword">this</span>.load.image(<span class="string">'text_start'</span>, <span class="string">'../assets/开始游戏.png'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    create () &#123;</span><br><span class="line">        <span class="keyword">this</span>.add.image(<span class="number">0</span>, <span class="number">0</span>, <span class="string">'text_start'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当控制台中打印出Phaser版本号等信息，且没有报错时，说明代码运行成功。</p>
</blockquote>
<h2 id="Phaser-游戏开发简单介绍"><a href="#Phaser-游戏开发简单介绍" class="headerlink" title="Phaser 游戏开发简单介绍"></a>Phaser 游戏开发简单介绍</h2><p>HTML5提供了canvas画布接口，其绘图方式有两种：2D(即Canvas), 3D(即WebGL).<br>通过画布我们可以绘制基础的图形，文字，以及图片等，通过绘图我们来进行游戏开发。当我们在编写动画时了解过帧这一个概念，同理的游戏就是许多帧的画面组成，而每一帧我们都可以来进行检测用户的操作，图形的物理运动等行为。</p>
<p><em>如下，游戏及动画的开发逻辑(类比理解)</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var game;</span><br><span class="line"></span><br><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">    //-&gt; 画图</span><br><span class="line">    </span><br><span class="line">    //-&gt; 用户逻辑</span><br><span class="line">    </span><br><span class="line">    //-&gt; 碰撞检测等等</span><br><span class="line">&#125;, 1000/60); //-&gt; 60fps</span><br></pre></td></tr></table></figure>
<p><em>Phaser 针对游戏开发为我们丰富了其生命周期</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var gamescene;</span><br><span class="line"></span><br><span class="line">gamescene = &#123;</span><br><span class="line">    preload : () =&gt; &#123;</span><br><span class="line">        // -&gt; 预加载资源;</span><br><span class="line">    &#125;,</span><br><span class="line">    create : () =&gt; &#123;</span><br><span class="line">        // -&gt; 创建游戏界面;</span><br><span class="line">        // -&gt; 即加载游戏中出现的元素(Sprite, Image等等)</span><br><span class="line">        // -&gt; 初始化用户输入等;</span><br><span class="line">    &#125;,</span><br><span class="line">    update : () =&gt; &#123;</span><br><span class="line">        // -&gt; 元素的物理运动;</span><br><span class="line">        // -&gt; 对用户输入的处理;</span><br><span class="line">        // -&gt; 等等;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">phaser: game -&gt; start -&gt; preload() -&gt; create() -&gt; update(); //-&gt; 不断地调用update进行绘图;</span><br></pre></td></tr></table></figure>
<p><strong>通过对比我们可以看到，Phaser为我们封装好的一个游戏的基本逻辑，我们只需要分门别类地在每一步处理对应的业务即可。</strong></p>
<p>编程的基础是数据结构和算法，后续文章我们将从游戏变成中特殊的数据结构(Sprite, TitleMap, Scene, Camera等)着手，逐步了解Phaser游戏的制作。</p>
<h3 id="后续介绍"><a href="#后续介绍" class="headerlink" title="后续介绍"></a>后续介绍</h3><ul>
<li>Phaser中的’数据结构’</li>
<li>Phaser的绘图及界面构建</li>
<li>Phaser.State场景</li>
<li>Phaser物理引擎</li>
<li>Phaser处理用户输入</li>
<li>Phaser的游戏配置</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://phaser.io/docs" target="_blank" rel="noopener">Phaser Doc</a><br><a href="http://www.phaserengine.com/" target="_blank" rel="noopener">Phaser 中文网</a><br><a href="http://club.phaser-china.com/" target="_blank" rel="noopener">Phaser 中文社区</a><br><a href="https://www.phaser-china.com/show.html" target="_blank" rel="noopener">Phaser 小站</a><br><a href="https://segmentfault.com/a/1190000009226335" target="_blank" rel="noopener">SF-从零到一：用Phaser.js写意地开发小游戏（Chapter 2 - 搭建游戏的骨架）</a></p>
</div></article></div><footer class="footer"><p class="info">Welcome to mrzjd's blog!</p><div class="infobox"><ul class="contacts"><li class="contacts-i">QQ: 390303304</li><li class="contacts-i">Mail: 390303304@qq.com</li></ul><p>Powered by hexo and github. The theme is zebra-theme.</p></div></footer></body></html>